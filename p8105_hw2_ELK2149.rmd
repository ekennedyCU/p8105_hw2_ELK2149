---
title: "Homework 2"
output: github_document
date: "2025-09-28"
author: Evan Kennedy, ELK2149
---

```{r homework_2_setup, include = FALSE}

#setting up
#opening necessary libraries
library(moderndive)
library(tidyverse)
library(dplyr)
library(readxl)

```

*** Problem 1 ***

```{r}
#separating out date variable, converting month into names of month, converting prez_dem and prez_gop into a single variable, and removing them along with day.

pols_month_df = 
    read_csv("./fivethirtyeight_datasets/pols-month.csv", na = c("NA", ".")) |>
  janitor::clean_names() |> 
  separate(mon, into = c("year", "month", "day"), sep = "-", convert = TRUE) |> 
  mutate(month = month.name[month]) |> 
  mutate(
    president = case_when(
      prez_dem == 1 ~ "dem",
      prez_gop == 1 ~ "gop")
) |> 
  select(-prez_dem, -prez_gop, -day)
  
pols_month_df
```

```{r}

#separating out date variable by /, converting year to YYYY, converting month to character format, arranging buy year, month, removing day to mirror above data frame.
snp_df = 
    read_csv("./fivethirtyeight_datasets/snp.csv", na = c("NA", ".")) |>
  janitor::clean_names()  |> 
  separate(date, into = c("month", "day", "year"), sep = "/", convert = TRUE) |> 
  mutate(year = ifelse(year >= 47, year + 1900, year + 2000)) |> 
  mutate(month = month.name[month]) |>
  arrange(year) |> 
  select(year, month, everything(), -day)

snp_df
```

```{r}

# pivoting long, converting month name to be consistent with other data sets.
unemployment_df = 
    read_csv("./fivethirtyeight_datasets/unemployment.csv", na = c("NA", ".")) |>
  janitor::clean_names() |> 
  pivot_longer(
    jan:dec,
    names_to = "month", 
    values_to = "%_UnEmp") |> 
 mutate(month = case_match(
    month,
    "jan" ~ "January",
    "feb" ~ "February",
    "mar" ~ "March",
    "apr" ~ "April",
    "may" ~ "May",
    "jun" ~ "June",
    "jul" ~ "July",
    "aug" ~ "August",
    "sep" ~ "September",
    "oct" ~ "October",
    "nov" ~ "November",
    "dec" ~ "December")
 )

unemployment_df
```

```{r}
#join SNP into POLS

pols_snp_df = 
  left_join(pols_month_df, snp_df, by = c("year", "month"))

pols_snp_df

#join unemployment

pols_snp_unemp_df = 
  left_join(pols_snp_df, unemployment_df, by = c("year", "month"))

pols_snp_unemp_df

```

The variables in this dataset are: `r (names(pols_snp_unemp_df))`. The data was collected between the dates of `r min(pols_snp_unemp_df$year)` and `r max(pols_snp_unemp_df$year)`. The dataset has `r nrow(pols_snp_unemp_df)` rows and `r ncol(pols_snp_unemp_df)` columns. pols_month_df contains data relating to the number of federal representatives, senators, state governors and president who represent each party in a given month and year. snp_df contains data on the S&P stock market score, by month and year. unemployment_df provides the percent of unemployment in the united states by month and year. 


*** Problem 2 ***

```{r}
trash_df = 
  read_excel("./Trash_Data.xlsx", sheet = "Mr. Trash Wheel", range = "A2:N653", na = c("NA", ".")) |>
  janitor::clean_names() |> 
  rename (
    weight = weight_tons,
    volume = volume_cubic_yards
  )
  
    
head(trash_df, 5)

```

